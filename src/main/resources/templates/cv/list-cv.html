<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>EduTrack - CV Approval List</title>
    <link rel="stylesheet" th:href="@{/css/master.css}"/>
    <!-- <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script> -->

    <style>
        .main-grid {
            max-width: 100%;
            display: grid;
            grid-template-columns: 1fr 3fr;
            gap: 1.5em;
            padding: 0.5em;
        }

        .sidebar > form {
            display: flex;
            flex-direction: column;
            position: sticky;
            top: 0.5em;
        }

        .radio-list {
            display: flex;
            flex-direction: column;
        }

        .cv-grid {
            display: flex;
            flex-direction: column;
            gap: 1.5em;
        }

        .cv-item {
            box-sizing: border-box;
            width: 100%;
            height: 100%;

            border-radius: 0.25em;
            background-color: #dddddd;
        }

        .cv-item .status {
            border-radius: 0.25em 0.25em 0 0;
            padding: 0.5em;
            display: flex;
            justify-content: space-between;
        }

        .cv-item .status span {
            font-weight: bold;
            text-transform: capitalize;
        }

        .cv-item .content {
            padding: 0.5em;
        }

        .cv-item .profile-section {
            display: flex;
            gap: 1em;
            margin-top: 0.5em;
            margin-bottom: 1em;
            align-items: center;
        }

        .cv-item .avatar-frame {
            aspect-ratio: 1/1;
            height: 6em;
            border-radius: 100%;
            background-color: white;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .avatar-frame svg {
            aspect-ratio: 1/1;
            width: 60%;
        }

        .cv-item .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.25em;
        }

        .cv-item .tag-item {
            background-color: #b5b5b5;
            border-radius: 0.25em;
            padding: 0.25em;
        }

        .small-heading {
            font-weight: bold;
            margin-bottom: 0.25em;
        }

        .bg-approved {
            background-color: #86A788;
        }

        .bg-rejected {
            background-color: #e87878;
        }

        .bg-pending {
            background-color: #F4B860;
        }

        .view-more {
            display: flex;
            justify-content: flex-end;
            margin-top: 1em;
        }

        .filter-button {
            border: none;
            border-radius: 0.25em;
            padding: 0.5em;
            background-color: #86A788;
            cursor: pointer;
        }

        .filter-button:hover {
            background-color: #759976;
        }

        .visible {
            visibility: visible;
        }

        .invisible {
            visibility: hidden;
        }

        .pagination {
            margin: 1em;
            max-width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1em;
        }
    </style>
</head>
<body class="viewport">
<h1 style="padding: 0.5rem 0.5rem 0 0.5rem; margin-bottom: 1rem; font-size: 3em">CV Approval List</h1>
<div class="main-grid">
    <aside class="sidebar">
        <form>
            <h3 class="small-heading">
                <label for="sort">Sorting Order:</label>
            </h3>
            <select name="sort" id="sort" style="margin-bottom: 1em">
                <option value="date-desc" selected>Date descending</option>
                <option value="date-asc">Date ascending</option>
            </select>

            <h3 class="small-heading">Filter Options:</h3>
            <div class="radio-list" style="margin-bottom: 1em">
                <label for="pending">
                    <input type="radio" name="filter" id="pending" value="pending">
                    Pending
                </label>

                <label for="approved">
                    <input type="radio" name="filter" id="approved" value="approved">
                    Approved
                </label>

                <label for="rejected">
                    <input type="radio" name="filter" id="rejected" value="rejected">
                    Rejected
                </label>
            </div>

            <button type="submit" class="filter-button">Filter</button>
        </form>
    </aside>

    <main class="cv-grid" th:with="cvList = ${page.content}">
        <div th:each="cv : ${cvList}" class="cv-item">
            <div class="status"
                 th:classappend="${cv.status.equals('approved') ? 'bg-approved' : cv.status.equals('rejected') ? 'bg-rejected' : 'bg-pending'}">
                <span th:text="${cv.status}"></span>
                <time th:text="${cv.createdDate.toLocaleString()}" th:datetime="${cv.createdDate.toString()}"></time>
                <a href="#" style="color: black">View More</a>
            </div>

            <div class="content">
                <div class="profile-section">
                    <div class="avatar-frame">
                        <svg th:if="${cv.user.avatar == null}" xmlns="http://www.w3.org/2000/svg"
                             class="bi bi-person-fill" viewBox="0 0 16 16">
                            <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6"/>
                        </svg>
                    </div>

                    <div>
                        <p th:text="${cv.user.fullName}"
                           style="font-size: 1.5em; font-weight: bold; margin-bottom: 0.25em"></p>
                        <p th:text="${cv.summary}"></p>
                    </div>
                </div>

                <div class="">
                    <h3 style="margin-top: 1em; margin-bottom: 0.5em">Skills</h3>
                    <div class="tags">
                        <div class="tag-item" th:each="skill : ${cv.getSkillItems()}" th:text="${skill}">
                        </div>
                    </div>
                </div>

                <div class="">
                    <h3 style="margin-top: 1em; margin-bottom: 0.5em">Education</h3>
                    <div class="tags">
                        <div class="tag-item" th:each="education : ${cv.getEducationItems()}" th:text="${education}">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>

<div class="pagination">
    <a th:href="@{/admin/cv/list/1}"
       th:classappend="${(pageNumber > 1) ? 'visible' : 'invisible'}">
        First
    </a>
    <a th:href="@{/admin/cv/list/{prev}(prev = ${pageNumber - 1})}"
       th:classappend="${(page.hasPrevious()) ? 'visible' : 'invisible'}">
        Previous
    </a>

    <span th:text="${'Page ' + pageNumber + ' of ' + page.totalPages}"></span>

    <a th:href="@{/admin/cv/list/{next}(next = ${pageNumber + 1})}"
       th:classappend="${(page.hasNext()) ? 'visible' : 'invisible'}">
        Next
    </a>
    <a th:href="@{/admin/cv/list/{last}(last = ${page.totalPages})}"
       th:classappend="${(pageNumber < page.getTotalPages()) ? 'visible' : 'invisible'}">
        Last
    </a>
</div>
</body>
</html>
